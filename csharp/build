#!/bin/bash
# https://stackoverflow.com/a/246128
SCRIPT_DIR=$(cd -- "$(dirname -- "${BASH_SOURCE[0]}")" &>/dev/null && pwd)

dist=$SCRIPT_DIR/dist
rm -rf $dist
mkdir -p $dist

dirs=('Client' 'Server')
dotnetp="dotnet publish -c Release"
for dir in "${dirs[@]}"; do
    cd $SCRIPT_DIR/$dir
    $dotnetp
    mkdir -p $dist/$dir
    cp -r ./bin/Release/*/publish/*.dll ../dist/$dir
    #rm -fr ./bin ./obj
    cd ..
done

echo "[RealifevTemplate]" >$dist/config.ini
cp $SCRIPT_DIR/fxmanifest.lua $dist
